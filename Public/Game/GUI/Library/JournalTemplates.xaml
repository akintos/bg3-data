<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			        xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
					xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                    xmlns:System="clr-namespace:System;assembly=mscorlib"
                    xmlns:ls="clr-namespace:ls;assembly=SharedGUI"
                    xmlns:noesis="clr-namespace:NoesisGUIExtensions;assembly=Noesis.GUI.Extensions"
					mc:Ignorable="d">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/GustavNoesisGUI;component/Library/NavButtons_k.xaml"/>
    </ResourceDictionary.MergedDictionaries>

    <System:Double x:Key="DisabledWaypointsOpacity">0.6</System:Double>
    <System:Double x:Key="ListItemMinHeight">72</System:Double>

    <Thickness x:Key="Journal.CloseButtonMargin">0,34,50,0</Thickness>
    <Thickness x:Key="Journal.TitleMargin">506,20,0,0</Thickness>
    <Thickness x:Key="Journal.ContentMargin">400,0,130,250</Thickness>
    <Thickness x:Key="Journal.DecorButtonCenterMargin">0,0,0,70</Thickness>
    <Thickness x:Key="Journal.LeftSideScrollViewerMargin">0,0,0,0</Thickness>
    <Thickness x:Key="Journal.LeftSideItemsPresenterMargin">100,20,80,0</Thickness>
    <Thickness x:Key="Journal.RightSideContentMargin">120,40,50,0</Thickness>
    <Thickness x:Key="Journal.LeftScrollBarMargin">-40,0,0,0</Thickness>
    
    <BitmapImage x:Key="Journal.DecorButtonCenter" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/Journal/decors_buttonCenter.png"/>
    <BitmapImage x:Key="Journal.DecorButtonSide" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/Journal/decors_buttonSide.png"/>
    <BitmapImage x:Key="Journal.IconQuestChecklist" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/Journal/ico_questChecklist.png"/>
    <BitmapImage x:Key="Journal.IconQuestDone" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/Journal/ico_questDone.png"/>
    <BitmapImage x:Key="Journal.IconQuestUpdated" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/Journal/bullet_updated.png"/>
    <BitmapImage x:Key="Journal.ListActive" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/Journal/li_active.png"/>
    <BitmapImage x:Key="Journal.ListInactive" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/Journal/li_inactive.png"/>
    <BitmapImage x:Key="Journal.QuestLogLink" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/Journal/questLog_link.png"/>


    <!-- Custom expander for the Dialogue treeview nodes -->
    <Style x:Key="ExpandCollapseToggleStyle" TargetType="{x:Type ToggleButton}">
        <Setter Property="Focusable" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                    <Border Background="Transparent" Width="80" VerticalAlignment="Stretch">
                        <Path x:Name="Arrow" Width="50" Data="M 7 0 L 21 14 L 7 28 Z" Fill="{StaticResource LS_accent75TxtColor}" Margin="20,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                    </Border>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Arrow" Property="Fill" Value="{StaticResource LS_accent100TxtColor}"></Setter>
                        </Trigger>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="Arrow" Property="Data" Value="M 0 0 L 14 14 L 28 0 Z"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <!-- Journal background and header -->
    <ControlTemplate x:Key="JournalHeader">
        <Grid HorizontalAlignment="Stretch">
            <b:Interaction.Triggers>
                <b:EventTrigger EventName="Loaded">
                    <b:InvokeCommandAction Command="{Binding Path=DataContext.DismissNotification, RelativeSource={RelativeSource AncestorType={x:Type ls:UIWidget}}}"/>
                </b:EventTrigger>
            </b:Interaction.Triggers>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Image Grid.Column="0" Source="{StaticResource NavButtonsBgSideFiller}" HorizontalAlignment="Stretch" VerticalAlignment="Top" Height="172" Stretch="Fill"/>
            <Image Grid.Column="1" Source="{StaticResource NavButtons5TabsBg}" HorizontalAlignment="Center" VerticalAlignment="Top" Stretch="None"/>
            <Image Grid.Column="2" Source="{StaticResource NavButtonsBgSideFiller}" HorizontalAlignment="Stretch" VerticalAlignment="Top" Height="172" Stretch="Fill"/>
            
            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Center" Margin="0,-28,0,0" d:DataContext="{d:DesignInstance {x:Type ls:Widget}, IsDesignTimeCreatable=True}">
                <ls:LSButton x:Name="MapButton" Template="{StaticResource NavButtonTemplate}" Style="{StaticResource DefaultNavButtonStyle}"
                         Content="{Binding Source='h7b064d66g5d48g4f9dg93c7g020e32c40def', Converter={StaticResource TranslatedStringConverter}}" 
                         Command="{Binding CustomEvent}"
                         CommandParameter="ToggleJournalMap">
                    <ls:LSButton.Resources>
                        <BitmapImage x:Key="IconDefault" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/BottomBar/ico_map_d.png"/>
                        <BitmapImage x:Key="IconHighlight" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/BottomBar/ico_map_h.png"/>
                    </ls:LSButton.Resources>
                    <ls:LSButton.ToolTip>
                        <ls:LSTooltip IsHitTestVisible="False" Content="{Binding Path=DataContext.CurrentPlayer.UIData.InputEvents, Converter={StaticResource FindInputEventConverter}, ConverterParameter='ToggleMap', ElementName=MapButton}"/>
                    </ls:LSButton.ToolTip>
                </ls:LSButton>
                <ls:LSButton x:Name="QuestsButton" Template="{StaticResource NavButtonTemplate}" Style="{StaticResource DefaultNavButtonStyle}"
                         Content="{Binding Source='h70f42b48g6d94g4fadga21egd28627f404d6', Converter={StaticResource TranslatedStringConverter}}" 
                         Command="{Binding CustomEvent}"
                         CommandParameter="ToggleJournalQuests">
                    <ls:LSButton.Resources>
                        <BitmapImage x:Key="IconDefault" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/Shared/ico_journal_inactive.png"/>
                        <BitmapImage x:Key="IconHighlight" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/Shared/ico_journal_active.png"/>
                    </ls:LSButton.Resources>
                    <ls:LSButton.ToolTip>
                        <ls:LSTooltip IsHitTestVisible="False" Content="{Binding Path=DataContext.CurrentPlayer.UIData.InputEvents, Converter={StaticResource FindInputEventConverter}, ConverterParameter='ToggleJournal', ElementName=QuestsButton}"/>
                    </ls:LSButton.ToolTip>
                </ls:LSButton>
                <ls:LSButton x:Name="InspirationButton" Template="{StaticResource NavButtonTemplate}" Style="{StaticResource DefaultNavButtonStyle}"
                         Content="{Binding Source='hccf10b5eg7400g48beg8523gb20b5431dd4d', Converter={StaticResource TranslatedStringConverter}}" 
                         Command="{Binding CustomEvent}"
                         CommandParameter="ToggleJournalInspiration">
                    <ls:LSButton.Resources>
                        <BitmapImage x:Key="IconDefault" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/Shared/ico_inspiration.png"/>
                        <BitmapImage x:Key="IconHighlight" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/Shared/ico_inspiration_h1.png"/>
                    </ls:LSButton.Resources>
                    <ls:LSButton.ToolTip>
                        <ls:LSTooltip IsHitTestVisible="False" Content="{Binding Path=DataContext.CurrentPlayer.UIData.InputEvents, Converter={StaticResource FindInputEventConverter}, ConverterParameter='ToggleInspiration', ElementName=InspirationButton}"/>
                    </ls:LSButton.ToolTip>
                </ls:LSButton>
                <ls:LSButton x:Name="DialoguesButton" Template="{StaticResource NavButtonTemplate}" Style="{StaticResource DefaultNavButtonStyle}"
                         Content="{Binding Source='hc610c4aeg0285g4e2agbc31g4bb458c1c7b3', Converter={StaticResource TranslatedStringConverter}}" 
                         Command="{Binding CustomEvent}"
                         CommandParameter="ToggleJournalDialogues">
                    <ls:LSButton.Resources>
                        <BitmapImage x:Key="IconDefault" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/Shared/ico_dialogues_inactive.png"/>
                        <BitmapImage x:Key="IconHighlight" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/Shared/ico_dialogues_active.png"/>
                    </ls:LSButton.Resources>
                </ls:LSButton>
                <ls:LSButton x:Name="TutorialsButton" Template="{StaticResource NavButtonTemplate}" Style="{StaticResource DefaultNavButtonStyle}"
                         Content="{Binding Source='h20907681g950fg42f3g844fg251c11592d4d', Converter={StaticResource TranslatedStringConverter}}" 
                         Command="{Binding CustomEvent}"
                         CommandParameter="ToggleJournalTutorial">
                    <ls:LSButton.Resources>
                        <BitmapImage x:Key="IconDefault" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/Shared/ico_info_inactive.png"/>
                        <BitmapImage x:Key="IconHighlight" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/Shared/ico_info_active.png"/>
                    </ls:LSButton.Resources>
                </ls:LSButton>
            </StackPanel>
        </Grid>

        <ControlTemplate.Triggers>
            <DataTrigger Binding="{Binding Path=Name, RelativeSource={RelativeSource AncestorType={x:Type ls:UIWidget}}}" Value="JournalMap">
                <Setter TargetName="MapButton" Property="Style" Value="{StaticResource SelectedNavButtonStyle}"/>
                <Setter TargetName="MapButton" Property="Command" Value="{x:Null}"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=Name, RelativeSource={RelativeSource AncestorType={x:Type ls:UIWidget}}}" Value="JournalQuest">
                <Setter TargetName="QuestsButton" Property="Style" Value="{StaticResource SelectedNavButtonStyle}"/>
                <Setter TargetName="QuestsButton" Property="Command" Value="{x:Null}"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=Name, RelativeSource={RelativeSource AncestorType={x:Type ls:UIWidget}}}" Value="JournalInspiration">
                <Setter TargetName="InspirationButton" Property="Style" Value="{StaticResource SelectedNavButtonStyle}"/>
                <Setter TargetName="InspirationButton" Property="Command" Value="{x:Null}"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=Name, RelativeSource={RelativeSource AncestorType={x:Type ls:UIWidget}}}" Value="JournalDialogues">
                <Setter TargetName="DialoguesButton" Property="Style" Value="{StaticResource SelectedNavButtonStyle}"/>
                <Setter TargetName="DialoguesButton" Property="Command" Value="{x:Null}"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=Name, RelativeSource={RelativeSource AncestorType={x:Type ls:UIWidget}}}" Value="JournalTutorial">
                <Setter TargetName="TutorialsButton" Property="Style" Value="{StaticResource SelectedNavButtonStyle}"/>
                <Setter TargetName="TutorialsButton" Property="Command" Value="{x:Null}"/>
            </DataTrigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <DataTemplate x:Key="WaypointErrorMessage">
        <ls:LSNineSliceImage Slices="35,85,80,35"  Padding="0,80,0,50" Width="491" MinHeight="344" ImageSource="pack://application:,,,/GustavNoesisGUI;component/Assets/Map/waypoint_warningBoxBg.png" HorizontalAlignment="Center" VerticalAlignment="Center">
            <ls:LSNineSliceImage.Content>
                <TextBlock x:Name="waypointMessage" Foreground="{StaticResource LS_alertTxtColor}" HorizontalAlignment="Center" VerticalAlignment="Center" TextWrapping="Wrap" TextAlignment="Center" Width="300" Effect="{StaticResource HUD.DropShadow}">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding .}" Value="Combat">
                                    <Setter Property="Text" Value="{Binding Source='h5c1ae8e5g296cg4507g88ebg820ccb9b0192', Converter={StaticResource TranslatedStringConverter}, ConverterParameter='Loca'}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding .}" Value="Location">
                                    <Setter Property="Text" Value="{Binding Source='h022192abg6d4cg4233g9f2bg69b1b573de56', Converter={StaticResource TranslatedStringConverter}, ConverterParameter='Loca'}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding .}" Value="Condition">
                                    <Setter Property="Text" Value="{Binding Source='h30a401abg4918g4287g9ac1gece42bb26e80', Converter={StaticResource TranslatedStringConverter}, ConverterParameter='Loca'}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding .}" Value="Unavailable">
                                    <Setter Property="Text" Value="{Binding Source='h87399802g7181g4c5eg950ag564f7fa59919', Converter={StaticResource TranslatedStringConverter}, ConverterParameter='Loca'}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding .}" Value="FTB">
                                    <Setter Property="Text" Value="{Binding Source='ha227a142g2946g47f2g9b98g3903acaafcb2', Converter={StaticResource TranslatedStringConverter}, ConverterParameter='Loca'}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding .}" Value="Summon">
                                    <Setter Property="Text" Value="{Binding Source='h4997abfegeda7g4991gbbe3g54e385aa2606', Converter={StaticResource TranslatedStringConverter}, ConverterParameter='Loca'}"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </ls:LSNineSliceImage.Content>
        </ls:LSNineSliceImage>

        <DataTemplate.Triggers>
            <DataTrigger Binding="{Binding .}" Value="None">
                <Setter Property="Visibility" Value="Collapsed"/>
            </DataTrigger>
        </DataTemplate.Triggers>
    </DataTemplate>

    <ControlTemplate x:Key="Journal.SidePanelTreeViewItemTemplate" TargetType="TreeViewItem">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <ls:LSNineSliceImage Grid.Row="0" x:Name="TreeItemBackground"  ImageSource="{StaticResource Journal.ListActive}" 
                                 Opacity="0.2" Slices="180, 22" Margin="-60,12,0,-12" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" MinHeight="53" Visibility="Hidden">
                <Rectangle Height="{Binding Path=ActualHeight, ElementName=PART_Header}" Width="1" />
            </ls:LSNineSliceImage>

            <ContentPresenter Grid.Row="0" x:Name="PART_Header" ContentSource="Header" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="Center"/>

            <ItemsPresenter Grid.Row="1" x:Name="TreeItemsHost" Margin="40,0,0,0"/>

            <b:Interaction.Triggers>
                <b:EventTrigger EventName="MouseLeftButtonDown">
                    <ls:LSPlaySound Sound="UI_Shared_Select"/>
                </b:EventTrigger>
            </b:Interaction.Triggers>

            <b:Interaction.Behaviors>
                <ls:CollectionPropertyCountBehavior x:Name="ActiveQuestsCount" ItemsSource="{Binding QuestViews}" PropertyName="QuestIsInProgress"/>
            </b:Interaction.Behaviors>
        </Grid>

        <ControlTemplate.Triggers>
            <Trigger Property="IsExpanded" Value="False">
                <Setter TargetName="TreeItemsHost" Property="Visibility" Value="Collapsed"/>
            </Trigger>
            <Trigger Property="IsSelected" Value="True">
                <Setter TargetName="TreeItemBackground" Property="Visibility" Value="Visible"/>
            </Trigger>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="HasHeader" Value="False"/>
                    <Condition Property="Width" Value="Auto"/>
                </MultiTrigger.Conditions>
                <Setter TargetName="PART_Header" Property="MinWidth" Value="150"/>
            </MultiTrigger>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="HasHeader" Value="False"/>
                    <Condition Property="Height" Value="Auto"/>
                </MultiTrigger.Conditions>
                <Setter TargetName="PART_Header" Property="MinHeight" Value="40"/>
            </MultiTrigger>
            <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                    <Condition Binding="{Binding ., Converter={StaticResource TypeConverter}}" Value="ls.QuestCategoryContainer"/>
                    <Condition Binding="{Binding Result, ElementName=ActiveQuestsCount}" Value="0"/>
                    <Condition Binding="{Binding IsChecked, ElementName=chkHideCompleted}" Value="True"/>
                </MultiDataTrigger.Conditions>
                <Setter Property="Visibility" Value="Collapsed"/>
            </MultiDataTrigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <ControlTemplate x:Key="Journal.SidePanelListBoxItemTemplate" TargetType="ListBoxItem">
        <Grid>
            <ls:LSNineSliceImage x:Name="ListItemBackground"  ImageSource="{StaticResource Journal.ListActive}" 
                                 Opacity="0.2" Slices="180, 0,180,24" Margin="-72,12,0,-12" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" MinHeight="40" Visibility="Hidden">
                <Rectangle Height="{Binding Path=ActualHeight, ElementName=PART_Header}" Width="1" />
            </ls:LSNineSliceImage>

            <ContentPresenter x:Name="PART_Content" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="Center"/>
            
            <b:Interaction.Triggers>
                <b:EventTrigger EventName="MouseLeftButtonDown">
                    <ls:LSPlaySound Sound="UI_Shared_Select"/>
                </b:EventTrigger>
            </b:Interaction.Triggers>
        </Grid>

        <ControlTemplate.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter TargetName="ListItemBackground" Property="Visibility" Value="Visible"/>
            </Trigger>
            <Trigger Property="Width" Value="Auto">
                <Setter TargetName="PART_Content" Property="MinWidth" Value="150"/>
            </Trigger>
            <Trigger Property="Height" Value="Auto">
                <Setter TargetName="PART_Content" Property="MinHeight" Value="40"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

</ResourceDictionary>